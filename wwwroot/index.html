<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Collaboard</title>

    <!-- External libraries -->
    <script src="https://unpkg.com/peerjs@1.3.2/dist/peerjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.2/signalr.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://www.whiteboard.team/dist/api.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="videostyle.css" />
</head>
<body>
    <!-- Username prompt modal -->
    <div id="usernameModal">
        <div class="modal-content">
            <h2>Welcome to Collaboard!</h2>
            <p>Please enter your username</p>
            <input type="text" id="usernameInput" placeholder="Your username" />
            <button id="usernameSubmit">Submit</button>
        </div>
    </div>

    <!-- Top header with room code display -->
    <header>
        <div class="top-bar">
            <img src="final_logo.png" alt="Final Logo" />
            <div class="session-code">
                Room: <span id="roomNameDisplay"></span>
            </div>
        </div>
        <button class="dropdown-toggle" onclick="toggleDropdownPanel()">
            <i class="fas fa-bars"></i>
        </button>
    </header>

    <!-- Main video grid container -->
    <div class="app-container">
        <div class="video-area" id="videoArea">
            <div id="videoGrid" class="video-grid"></div>
        </div>
    </div>

    <!-- Real‑time status of mic/camera -->
    <div id="statusIndicator">Mic: On | Camera: On</div>

    <!-- Slide‑out panel for chat and whiteboard -->
    <div id="dropdownPanel" class="dropdown-panel">
        <div id="panelResizeHandle" class="panel-resize-handle"></div>
        <div class="tabs">
            <button id="chatTab" class="tab-btn active" onclick="showPanel('chat')">
                Chat
            </button>
            <button id="whiteboardTab" class="tab-btn" onclick="showPanel('whiteboard')">
                Whiteboard
            </button>
        </div>

        <!-- Chat panel -->
        <div id="chatPanel" class="panel-content active">
            <h2>Chat</h2>
            <div class="chat-container">
                <div id="chatBox" class="chat-box"></div>
                <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="Type a message..." />
                    <button onclick="sendChat()">Send</button>
                </div>
            </div>
        </div>

        <!-- Whiteboard panel -->
        <div id="whiteboardPanel" class="panel-content">
            <div class="whiteboard-container">
                <div id="wt-container" class="wt-container"></div>
            </div>
        </div>
    </div>

    <!-- Controls for mute/camera/screen share/etc. -->
    <div class="bottom-toolbar">
        <button onclick="toggleMute()">
            <i class="fas fa-microphone"></i> Mute/Unmute
        </button>
        <button onclick="toggleCamera()">
            <i class="fas fa-video"></i> Camera On/Off
        </button>
        <button onclick="startScreenShare()">
            <i class="fas fa-desktop"></i> Share Screen
        </button>
        <button onclick="toggleVirtualBackground()">
            <i class="fas fa-image"></i> Virtual&nbsp;BG
        </button>
        <button onclick="raiseHand()">Raise Hand</button>
        <button onclick="toggleRecording()">
            <i class="fas fa-video"></i>
            <span id="recordBtnLabel">Record</span>
        </button>
    </div>

    <!-- JavaScript modules -->
    <script src="js/app.js"></script>
    <script src="js/peer-connection.js"></script>
    <script src="js/signalr-connection.js"></script>
    <script src="js/video-controls.js"></script>
    <script src="js/ui-controls.js"></script>
    <script src="js/whiteboard.js"></script>
    <script src="js/chat.js"></script>
</body>
</html>